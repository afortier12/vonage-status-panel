{"version":3,"sources":["../src/status_ctrl.js"],"names":["System","register","_export","_context","MetricsPanelCtrl","_","TimeSeries","coreModule","kbn","moment","_createClass","panelDefaults","StatusPluginCtrl","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","setters","_appPluginsSdk","_lodash","default","_appCoreTime_series","_appCoreCore_module","_appCoreUtilsKbn","_moment","_cssStatus_panelCss","execute","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","flipCard","flipTime","colorMode","colors","crit","warn","ok","disable","isGrayOnNoData","isIgnoreOKColors","isHideAlertsOnDisable","cornerRadius","isAutoScrollOnOverflow","_MetricsPanelCtrl","$scope","$injector","$log","$filter","annotationsSrv","_this","getPrototypeOf","defaultsDeep","panel","filter","valueHandlers","aggregations","displayTypes","displayAliasTypes","displayValueTypes","colorModes","fontFormats","each","targets","t","valueHandler","Date","events","on","onRender","bind","postRefresh","onDataError","onDataReceived","onInitEditMode","onColorChange","addFilters","_this2","numberOrTextFilter","input","angular","isNumber","$stateful","textRegex","regex","RegExp","e","matchResults","match","_this3","fixedSpan","span","measurements","duplicates","measurement","hide","m","res","alias","addEditorTab","unitFormats","getUnitFormats","setUnitFormat","subItem","units","render","fixPanelHeader","panelHeaderHeight","title","$panelContainer","find","css","setElementHeight","$panelContoller","height","minHeight","setTextMaxWidth","tail","panelWidth","innerWidth","isNaN","parseInt","slice","maxWidth","isAutoScrollAlerts","element","overflowY","offsetHeight","scrollHeight","onHandlerChange","Number","undefined","String","c","w","getTime","item","_this4","color","_this5","upgradeOldVersion","clusterName","displayName","replace","namePrefix","addClass","removeClass","disabled","display","annotation","extraMoreAlerts","series","s","datapoints","url","isDisplayValue","displayType","valueDisplayRegex","validateRegex","aggregation","max","point","stats","min","diff","total","avg","display_value","handleThresholdStatus","handleDisabledStatus","handleTextOnly","autoFlip","updatePanelState","handleCssDisplay","parseUri","handleMaxAlertsToShow","_this6","displayAliasType","displayValueWithAlias","isFloat","thresholds","parseThresholds","inverted","isCritical","isWarning","isCheckRanges","warnIsNumber","critIsNumber","formatDisplayValue","displayValueWhenAliasDisplayed","displayValueFromWarning","displayValueFromCritical","push","isFinite","decimals","decimalPlaces","Math","valueFormats","date","dashboard","isTimezoneUtc","utc","format","dateFormat","num","disabledValue","panelState","radius","okColor","_this7","maxAlertNumber","currentMaxAllowedAlerts","filteredOutAlerts","arrayNamesToSlice","forEach","arrayName","originAlertCount","links","link","uri","targetBlank","dataList","map","seriesHandler","$onDestroy","timeoutId","clearInterval","_this8","setInterval","toggleClass","scope","elem","attrs","ctrl","metricOptions","parseFloat","valueOf","val","toString","toLowerCase","indexOf","seriesData","flotpairs","getFlotPairs","templateUrl"],"mappings":"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","file":"status_ctrl.js","sourcesContent":["\"use strict\";\n\nSystem.register([\"app/plugins/sdk\", \"lodash\", \"app/core/time_series2\", \"app/core/core_module\", \"app/core/utils/kbn\", \"moment\", \"./css/status_panel.css!\"], function (_export, _context) {\n\t\"use strict\";\n\n\tvar MetricsPanelCtrl, _, TimeSeries, coreModule, kbn, moment, _createClass, panelDefaults, StatusPluginCtrl;\n\n\tfunction _classCallCheck(instance, Constructor) {\n\t\tif (!(instance instanceof Constructor)) {\n\t\t\tthrow new TypeError(\"Cannot call a class as a function\");\n\t\t}\n\t}\n\n\tfunction _possibleConstructorReturn(self, call) {\n\t\tif (!self) {\n\t\t\tthrow new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\t\t}\n\n\t\treturn call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n\t}\n\n\tfunction _inherits(subClass, superClass) {\n\t\tif (typeof superClass !== \"function\" && superClass !== null) {\n\t\t\tthrow new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n\t\t}\n\n\t\tsubClass.prototype = Object.create(superClass && superClass.prototype, {\n\t\t\tconstructor: {\n\t\t\t\tvalue: subClass,\n\t\t\t\tenumerable: false,\n\t\t\t\twritable: true,\n\t\t\t\tconfigurable: true\n\t\t\t}\n\t\t});\n\t\tif (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n\t}\n\n\treturn {\n\t\tsetters: [function (_appPluginsSdk) {\n\t\t\tMetricsPanelCtrl = _appPluginsSdk.MetricsPanelCtrl;\n\t\t}, function (_lodash) {\n\t\t\t_ = _lodash.default;\n\t\t}, function (_appCoreTime_series) {\n\t\t\tTimeSeries = _appCoreTime_series.default;\n\t\t}, function (_appCoreCore_module) {\n\t\t\tcoreModule = _appCoreCore_module.default;\n\t\t}, function (_appCoreUtilsKbn) {\n\t\t\tkbn = _appCoreUtilsKbn.default;\n\t\t}, function (_moment) {\n\t\t\tmoment = _moment.default;\n\t\t}, function (_cssStatus_panelCss) {}],\n\t\texecute: function () {\n\t\t\t_createClass = function () {\n\t\t\t\tfunction defineProperties(target, props) {\n\t\t\t\t\tfor (var i = 0; i < props.length; i++) {\n\t\t\t\t\t\tvar descriptor = props[i];\n\t\t\t\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\t\t\t\tdescriptor.configurable = true;\n\t\t\t\t\t\tif (\"value\" in descriptor) descriptor.writable = true;\n\t\t\t\t\t\tObject.defineProperty(target, descriptor.key, descriptor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn function (Constructor, protoProps, staticProps) {\n\t\t\t\t\tif (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t\t\t\t\tif (staticProps) defineProperties(Constructor, staticProps);\n\t\t\t\t\treturn Constructor;\n\t\t\t\t};\n\t\t\t}();\n\n\t\t\tpanelDefaults = {\n\t\t\t\tflipCard: false,\n\t\t\t\tflipTime: 5,\n\t\t\t\tcolorMode: 'Panel',\n\t\t\t\t// Changed colors to match Table Panel so colorised text is easier to read\n\t\t\t\tcolors: {\n\t\t\t\t\tcrit: 'rgba(245, 54, 54, 0.9)',\n\t\t\t\t\twarn: 'rgba(237, 129, 40, 0.9)',\n\t\t\t\t\tok: 'rgba(50, 128, 45, 0.9)',\n\t\t\t\t\tdisable: 'rgba(128, 128, 128, 0.9)'\n\t\t\t\t},\n\t\t\t\tisGrayOnNoData: false,\n\t\t\t\tisIgnoreOKColors: false,\n\t\t\t\tisHideAlertsOnDisable: false,\n\t\t\t\tcornerRadius: 0,\n\t\t\t\tisAutoScrollOnOverflow: false\n\t\t\t};\n\n\t\t\t_export(\"StatusPluginCtrl\", StatusPluginCtrl = function (_MetricsPanelCtrl) {\n\t\t\t\t_inherits(StatusPluginCtrl, _MetricsPanelCtrl);\n\n\t\t\t\t/** @ngInject */\n\t\t\t\tfunction StatusPluginCtrl($scope, $injector, $log, $filter, annotationsSrv) {\n\t\t\t\t\t_classCallCheck(this, StatusPluginCtrl);\n\n\t\t\t\t\tvar _this = _possibleConstructorReturn(this, (StatusPluginCtrl.__proto__ || Object.getPrototypeOf(StatusPluginCtrl)).call(this, $scope, $injector));\n\n\t\t\t\t\t_.defaultsDeep(_this.panel, panelDefaults);\n\n\t\t\t\t\t//this.log = $log.debug;\n\t\t\t\t\t_this.filter = $filter;\n\n\t\t\t\t\t_this.valueHandlers = ['Number Threshold', 'String Threshold', 'Date Threshold', 'Disable Criteria', 'Text Only'];\n\t\t\t\t\t_this.aggregations = ['Last', 'First', 'Max', 'Min', 'Sum', 'Avg', 'Delta'];\n\t\t\t\t\t_this.displayTypes = ['Regular', 'Annotation'];\n\t\t\t\t\t_this.displayAliasTypes = ['Warning / Critical', 'Always'];\n\t\t\t\t\t_this.displayValueTypes = ['Never', 'When Alias Displayed', 'Warning / Critical', 'Critical Only'];\n\t\t\t\t\t_this.colorModes = ['Panel', 'Metric', 'Disabled'];\n\t\t\t\t\t_this.fontFormats = ['Regular', 'Bold', 'Italic'];\n\n\t\t\t\t\t// Dates get stored as strings and will need to be converted back to a Date objects\n\t\t\t\t\t_.each(_this.panel.targets, function (t) {\n\t\t\t\t\t\tif (t.valueHandler === \"Date Threshold\") {\n\t\t\t\t\t\t\tif (typeof t.crit != \"undefined\") t.crit = new Date(t.crit);\n\t\t\t\t\t\t\tif (typeof t.warn != \"undefined\") t.warn = new Date(t.warn);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t_this.panel.flipTime = _this.panel.flipTime || 5;\n\n\t\t\t\t\t/** Bind events to functions **/\n\t\t\t\t\t_this.events.on('render', _this.onRender.bind(_this));\n\t\t\t\t\t_this.events.on('refresh', _this.postRefresh.bind(_this));\n\t\t\t\t\t_this.events.on('data-error', _this.onDataError.bind(_this));\n\t\t\t\t\t_this.events.on('data-received', _this.onDataReceived.bind(_this));\n\t\t\t\t\t_this.events.on('data-snapshot-load', _this.onDataReceived.bind(_this));\n\t\t\t\t\t_this.events.on('init-edit-mode', _this.onInitEditMode.bind(_this));\n\n\t\t\t\t\t_this.onColorChange = _this.onColorChange.bind(_this);\n\n\t\t\t\t\t_this.addFilters();\n\t\t\t\t\treturn _this;\n\t\t\t\t}\n\n\t\t\t\t_createClass(StatusPluginCtrl, [{\n\t\t\t\t\tkey: \"addFilters\",\n\t\t\t\t\tvalue: function addFilters() {\n\t\t\t\t\t\tvar _this2 = this;\n\n\t\t\t\t\t\tcoreModule.filter('numberOrText', function () {\n\t\t\t\t\t\t\tvar numberOrTextFilter = function numberOrTextFilter(input) {\n\t\t\t\t\t\t\t\tif (angular.isNumber(input)) {\n\t\t\t\t\t\t\t\t\treturn _this2.filter('number')(input);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn input;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tnumberOrTextFilter.$stateful = true;\n\t\t\t\t\t\t\treturn numberOrTextFilter;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tcoreModule.filter('numberOrTextWithRegex', function () {\n\t\t\t\t\t\t\tvar numberOrTextFilter = function numberOrTextFilter(input, textRegex) {\n\t\t\t\t\t\t\t\tif (angular.isNumber(input)) {\n\t\t\t\t\t\t\t\t\treturn _this2.filter('number')(input);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (textRegex == null || textRegex.length == 0) {\n\t\t\t\t\t\t\t\t\t\treturn input;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tvar regex = void 0;\n\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tregex = new RegExp(textRegex);\n\t\t\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\t\t\treturn input;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (!input) {\n\t\t\t\t\t\t\t\t\t\t\treturn input;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tvar matchResults = input.match(regex);\n\t\t\t\t\t\t\t\t\t\tif (matchResults == null) {\n\t\t\t\t\t\t\t\t\t\t\treturn input;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\treturn matchResults[0];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tnumberOrTextFilter.$stateful = true;\n\t\t\t\t\t\t\treturn numberOrTextFilter;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"postRefresh\",\n\t\t\t\t\tvalue: function postRefresh() {\n\t\t\t\t\t\tvar _this3 = this;\n\n\t\t\t\t\t\tif (this.panel.fixedSpan) {\n\t\t\t\t\t\t\tthis.panel.span = this.panel.fixedSpan;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.measurements = this.panel.targets;\n\n\t\t\t\t\t\t/** Duplicate alias validation **/\n\t\t\t\t\t\tthis.duplicates = false;\n\n\t\t\t\t\t\tthis.measurements = _.filter(this.measurements, function (measurement) {\n\t\t\t\t\t\t\treturn !measurement.hide;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t_.each(this.measurements, function (m) {\n\t\t\t\t\t\t\tvar res = _.filter(_this3.measurements, function (measurement) {\n\t\t\t\t\t\t\t\treturn (m.alias == measurement.alias || m.target == measurement.target && m.target) && !m.hide;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (res.length > 1) {\n\t\t\t\t\t\t\t\t_this3.duplicates = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"onInitEditMode\",\n\t\t\t\t\tvalue: function onInitEditMode() {\n\t\t\t\t\t\tthis.addEditorTab('Options', 'public/plugins/vonage-status-panel/editor.html', 2);\n\t\t\t\t\t\t// Load in the supported units-of-measure formats so they can be displayed in the editor\n\t\t\t\t\t\tthis.unitFormats = kbn.getUnitFormats();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"setUnitFormat\",\n\t\t\t\t\tvalue: function setUnitFormat(measurement, subItem) {\n\t\t\t\t\t\tmeasurement.units = subItem.value;\n\t\t\t\t\t\tthis.render();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"fixPanelHeader\",\n\t\t\t\t\tvalue: function fixPanelHeader() {\n\t\t\t\t\t\t// Handle the panel top menu height, since it's display doesn't look good with the panel\n\t\t\t\t\t\tvar panelHeaderHeight = '';\n\t\t\t\t\t\tif (this.panel.title.length === 0) {\n\t\t\t\t\t\t\tpanelHeaderHeight = '10px';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.$panelContainer.find('.panel-header').css('height', panelHeaderHeight);\n\t\t\t\t\t\tthis.$panelContainer.find('.panel-menu-container').css('height', panelHeaderHeight);\n\t\t\t\t\t\tthis.$panelContainer.find('.fa-caret-down').css('display', 'none');\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"setElementHeight\",\n\t\t\t\t\tvalue: function setElementHeight() {\n\t\t\t\t\t\t// Handle the panel height\n\t\t\t\t\t\tthis.$panelContainer.find('.status-panel').css('min-height', this.$panelContoller.height + 'px');\n\t\t\t\t\t\tthis.minHeight = this.$panelContoller.height - 10;\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"setTextMaxWidth\",\n\t\t\t\t\tvalue: function setTextMaxWidth() {\n\t\t\t\t\t\tvar tail = ' â€¦';\n\t\t\t\t\t\tvar panelWidth = this.$panelContainer.innerWidth();\n\t\t\t\t\t\tif (isNaN(panelWidth)) panelWidth = parseInt(panelWidth.slice(0, -2), 10) / 12;\n\t\t\t\t\t\tpanelWidth = panelWidth - 20;\n\t\t\t\t\t\tthis.maxWidth = panelWidth;\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"isAutoScrollAlerts\",\n\t\t\t\t\tvalue: function isAutoScrollAlerts() {\n\t\t\t\t\t\tif (!this.panel.isAutoScrollOnOverflow) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar element = this.$panelContainer.find('.status-panel')[0];\n\t\t\t\t\t\tvar overflowY = element.offsetHeight < element.scrollHeight;\n\t\t\t\t\t\treturn overflowY;\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"onHandlerChange\",\n\t\t\t\t\tvalue: function onHandlerChange(measurement) {\n\t\t\t\t\t\t// If the Threshold type changes between Number/String/Date then try and recast the thresholds to keep consistent\n\t\t\t\t\t\tif (measurement.valueHandler === \"Number Threshold\") {\n\t\t\t\t\t\t\tmeasurement.crit = isNaN(Number(measurement.crit)) ? undefined : Number(measurement.crit);\n\t\t\t\t\t\t\tmeasurement.warn = isNaN(Number(measurement.warn)) ? undefined : Number(measurement.warn);\n\t\t\t\t\t\t} else if (measurement.valueHandler === \"String Threshold\") {\n\t\t\t\t\t\t\tif (typeof measurement.crit != \"undefined\") measurement.crit = String(measurement.crit);\n\t\t\t\t\t\t\tif (typeof measurement.warn != \"undefined\") measurement.warn = String(measurement.warn);\n\t\t\t\t\t\t} else if (measurement.valueHandler === \"Date Threshold\") {\n\t\t\t\t\t\t\tvar c = new Date(measurement.crit),\n\t\t\t\t\t\t\t    w = new Date(measurement.warn);\n\t\t\t\t\t\t\tmeasurement.crit = isNaN(c.getTime()) ? undefined : c;\n\t\t\t\t\t\t\tmeasurement.warn = isNaN(w.getTime()) ? undefined : w;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.onRender();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"onColorChange\",\n\t\t\t\t\tvalue: function onColorChange(item) {\n\t\t\t\t\t\tvar _this4 = this;\n\n\t\t\t\t\t\treturn function (color) {\n\t\t\t\t\t\t\t_this4.panel.colors[item] = color;\n\t\t\t\t\t\t\t_this4.render();\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"onRender\",\n\t\t\t\t\tvalue: function onRender() {\n\t\t\t\t\t\tvar _this5 = this;\n\n\t\t\t\t\t\tthis.fixPanelHeader();\n\t\t\t\t\t\tthis.setElementHeight();\n\t\t\t\t\t\tthis.setTextMaxWidth();\n\t\t\t\t\t\tthis.upgradeOldVersion();\n\n\t\t\t\t\t\tif (this.panel.clusterName) {\n\t\t\t\t\t\t\tthis.panel.displayName = this.filter('interpolateTemplateVars')(this.panel.clusterName, this.$scope).replace(new RegExp(this.panel.namePrefix, 'i'), '');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.panel.displayName = \"\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.panel.flipCard) {\n\t\t\t\t\t\t\tthis.$panelContainer.addClass(\"effect-hover\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$panelContainer.removeClass(\"effect-hover\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar targets = this.panel.targets;\n\n\t\t\t\t\t\tthis.crit = [];\n\t\t\t\t\t\tthis.warn = [];\n\t\t\t\t\t\tthis.disabled = [];\n\t\t\t\t\t\tthis.display = [];\n\t\t\t\t\t\tthis.annotation = [];\n\t\t\t\t\t\tthis.extraMoreAlerts = null;\n\n\t\t\t\t\t\t_.each(this.series, function (s) {\n\t\t\t\t\t\t\tif (s.datapoints.length === 0) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar target = _.find(targets, function (target) {\n\t\t\t\t\t\t\t\treturn target.alias == s.alias || target.target == s.alias;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (!target) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ts.alias = target.alias;\n\t\t\t\t\t\t\ts.url = target.url;\n\t\t\t\t\t\t\ts.isDisplayValue = true;\n\t\t\t\t\t\t\ts.displayType = target.displayType;\n\t\t\t\t\t\t\ts.valueDisplayRegex = \"\";\n\n\t\t\t\t\t\t\tif (_this5.validateRegex(target.valueDisplayRegex)) {\n\t\t\t\t\t\t\t\ts.valueDisplayRegex = target.valueDisplayRegex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar value = void 0;\n\t\t\t\t\t\t\tswitch (target.aggregation) {\n\t\t\t\t\t\t\t\tcase 'Max':\n\t\t\t\t\t\t\t\t\tvalue = _.max(s.datapoints, function (point) {\n\t\t\t\t\t\t\t\t\t\treturn point[0];\n\t\t\t\t\t\t\t\t\t})[0];\n\t\t\t\t\t\t\t\t\tvalue = s.stats.max;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'Min':\n\t\t\t\t\t\t\t\t\tvalue = _.min(s.datapoints, function (point) {\n\t\t\t\t\t\t\t\t\t\treturn point[0];\n\t\t\t\t\t\t\t\t\t})[0];\n\t\t\t\t\t\t\t\t\tvalue = s.stats.min;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'Delta':\n\t\t\t\t\t\t\t\t\tvalue = s.datapoints[s.datapoints.length - 1][0] - s.datapoints[0][0];\n\t\t\t\t\t\t\t\t\tvalue = s.stats.diff;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'Sum':\n\t\t\t\t\t\t\t\t\tvalue = 0;\n\t\t\t\t\t\t\t\t\t_.each(s.datapoints, function (point) {\n\t\t\t\t\t\t\t\t\t\tvalue += point[0];\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tvalue = s.stats.total;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'Avg':\n\t\t\t\t\t\t\t\t\tvalue = s.stats.avg;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'First':\n\t\t\t\t\t\t\t\t\tvalue = s.datapoints[0][0];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tvalue = s.datapoints[s.datapoints.length - 1][0];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ts.display_value = value;\n\n\t\t\t\t\t\t\tif (target.valueHandler == \"Number Threshold\" || target.valueHandler == \"String Threshold\" || target.valueHandler == \"Date Threshold\") {\n\t\t\t\t\t\t\t\t_this5.handleThresholdStatus(s, target);\n\t\t\t\t\t\t\t} else if (target.valueHandler == \"Disable Criteria\") {\n\t\t\t\t\t\t\t\t_this5.handleDisabledStatus(s, target);\n\t\t\t\t\t\t\t} else if (target.valueHandler == \"Text Only\") {\n\t\t\t\t\t\t\t\t_this5.handleTextOnly(s, target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.panel.isHideAlertsOnDisable && this.disabled.length > 0) {\n\t\t\t\t\t\t\tthis.crit = [];\n\t\t\t\t\t\t\tthis.warn = [];\n\t\t\t\t\t\t\tthis.display = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.autoFlip();\n\t\t\t\t\t\tthis.updatePanelState();\n\t\t\t\t\t\tthis.handleCssDisplay();\n\t\t\t\t\t\tthis.parseUri();\n\n\t\t\t\t\t\t//This must appear after handling the css style of the panel\n\t\t\t\t\t\tthis.handleMaxAlertsToShow();\n\n\t\t\t\t\t\t//Calling postRefresh will ensure the measurements are set on the initial render\n\t\t\t\t\t\tthis.postRefresh();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"upgradeOldVersion\",\n\t\t\t\t\tvalue: function upgradeOldVersion() {\n\t\t\t\t\t\tvar _this6 = this;\n\n\t\t\t\t\t\tvar targets = this.panel.targets;\n\n\t\t\t\t\t\t//Handle legacy code\n\t\t\t\t\t\t_.each(targets, function (target) {\n\t\t\t\t\t\t\tif (target.valueHandler == null) {\n\t\t\t\t\t\t\t\tif (target.displayType != null) {\n\t\t\t\t\t\t\t\t\ttarget.valueHandler = target.displayType;\n\t\t\t\t\t\t\t\t\tif (target.valueHandler == \"Annotation\") {\n\t\t\t\t\t\t\t\t\t\ttarget.valueHandler = \"Text Only\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttarget.valueHandler = _this6.valueHandlers[0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttarget.displayType = _this6.displayTypes[0];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (target.display != null) {\n\t\t\t\t\t\t\t\ttarget.displayAliasType = target.display ? \"Always\" : _this6.displayAliasTypes[0];\n\t\t\t\t\t\t\t\ttarget.displayValueWithAlias = target.display ? 'When Alias Displayed' : _this6.displayValueTypes[0];\n\t\t\t\t\t\t\t\tdelete target.display;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Depreciate Threshold in favour of Type specific versions\n\t\t\t\t\t\t_.each(targets, function (target) {\n\t\t\t\t\t\t\tif (target.valueHandler === \"Threshold\") {\n\t\t\t\t\t\t\t\t// Use the same logic as Threshold Parsing to ensure we retain same behaviour\n\t\t\t\t\t\t\t\t// i.e. map to Number Threshold if two floats (i.e. range check) otherwise map to String Threshold (i.e. exact match)\n\t\t\t\t\t\t\t\tif (StatusPluginCtrl.isFloat(target.crit) && StatusPluginCtrl.isFloat(target.warn)) {\n\t\t\t\t\t\t\t\t\ttarget.valueHandler = \"Number Threshold\";\n\t\t\t\t\t\t\t\t\ttarget.crit = Number(target.crit);\n\t\t\t\t\t\t\t\t\ttarget.warn = Number(target.warn);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttarget.valueHandler = \"String Threshold\";\n\t\t\t\t\t\t\t\t\tif (typeof target.crit != \"undefined\") target.crit = String(target.crit);\n\t\t\t\t\t\t\t\t\tif (typeof target.warn != \"undefined\") target.warn = String(target.warn);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"handleThresholdStatus\",\n\t\t\t\t\tvalue: function handleThresholdStatus(series, target) {\n\t\t\t\t\t\tseries.thresholds = StatusPluginCtrl.parseThresholds(target);\n\t\t\t\t\t\tseries.inverted = series.thresholds.crit < series.thresholds.warn;\n\n\t\t\t\t\t\tvar isCritical = false;\n\t\t\t\t\t\tvar isWarning = false;\n\t\t\t\t\t\tvar isCheckRanges = series.thresholds.warnIsNumber && series.thresholds.critIsNumber;\n\t\t\t\t\t\tif (isCheckRanges) {\n\t\t\t\t\t\t\tif (!series.inverted) {\n\t\t\t\t\t\t\t\tif (series.display_value >= series.thresholds.crit) {\n\t\t\t\t\t\t\t\t\tisCritical = true;\n\t\t\t\t\t\t\t\t} else if (series.display_value >= series.thresholds.warn) {\n\t\t\t\t\t\t\t\t\tisWarning = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (series.display_value <= series.thresholds.crit) {\n\t\t\t\t\t\t\t\t\tisCritical = true;\n\t\t\t\t\t\t\t\t} else if (series.display_value <= series.thresholds.warn) {\n\t\t\t\t\t\t\t\t\tisWarning = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (series.display_value == series.thresholds.crit) {\n\t\t\t\t\t\t\t\tisCritical = true;\n\t\t\t\t\t\t\t} else if (series.display_value == series.thresholds.warn) {\n\t\t\t\t\t\t\t\tisWarning = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Add units-of-measure and decimal formatting or date formatting as needed\n\t\t\t\t\t\tseries.display_value = this.formatDisplayValue(series.display_value, target);\n\n\t\t\t\t\t\tvar displayValueWhenAliasDisplayed = 'When Alias Displayed' === target.displayValueWithAlias;\n\t\t\t\t\t\tvar displayValueFromWarning = 'Warning / Critical' === target.displayValueWithAlias;\n\t\t\t\t\t\tvar displayValueFromCritical = 'Critical Only' === target.displayValueWithAlias;\n\n\t\t\t\t\t\tif (isCritical) {\n\t\t\t\t\t\t\t//In critical state we don't show the error as annotation\n\t\t\t\t\t\t\tseries.displayType = this.displayTypes[0];\n\t\t\t\t\t\t\tseries.isDisplayValue = displayValueWhenAliasDisplayed || displayValueFromWarning || displayValueFromCritical;\n\t\t\t\t\t\t\tthis.crit.push(series);\n\t\t\t\t\t\t} else if (isWarning) {\n\t\t\t\t\t\t\t//In warning state we don't show the warning as annotation\n\t\t\t\t\t\t\tseries.displayType = this.displayTypes[0];\n\t\t\t\t\t\t\tseries.isDisplayValue = displayValueWhenAliasDisplayed || displayValueFromWarning;\n\t\t\t\t\t\t\tthis.warn.push(series);\n\t\t\t\t\t\t} else if (\"Always\" == target.displayAliasType) {\n\t\t\t\t\t\t\tseries.isDisplayValue = displayValueWhenAliasDisplayed;\n\t\t\t\t\t\t\tif (series.displayType == \"Annotation\") {\n\t\t\t\t\t\t\t\tthis.annotation.push(series);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.display.push(series);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"formatDisplayValue\",\n\t\t\t\t\tvalue: function formatDisplayValue(value, target) {\n\t\t\t\t\t\t// Format the display value. Set to \"Invalid\" if value is out-of-bounds or a type mismatch with the handler\n\t\t\t\t\t\tif (target.valueHandler === \"Number Threshold\") {\n\t\t\t\t\t\t\tif (_.isFinite(value)) {\n\t\t\t\t\t\t\t\tvar units = typeof target.units === \"string\" ? target.units : 'none';\n\t\t\t\t\t\t\t\tvar decimals = this.decimalPlaces(value);\n\t\t\t\t\t\t\t\t// We define the decimal percision by the minimal decimal needed\n\t\t\t\t\t\t\t\tdecimals = typeof target.decimals === \"number\" ? Math.min(target.decimals, decimals) : decimals;\n\t\t\t\t\t\t\t\tvalue = kbn.valueFormats[units](value, decimals, null);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalue = \"Invalid Number\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (target.valueHandler === \"String Threshold\") {\n\t\t\t\t\t\t\tif (value === undefined || value === null || value !== value) value = \"Invalid String\";\n\t\t\t\t\t\t} else if (target.valueHandler === \"Date Threshold\") {\n\t\t\t\t\t\t\tif (_.isFinite(value)) {\n\t\t\t\t\t\t\t\tvar date = moment(new Date(value));\n\t\t\t\t\t\t\t\tif (this.dashboard.isTimezoneUtc()) date = date.utc();\n\t\t\t\t\t\t\t\tvalue = date.format(target.dateFormat);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalue = \"Invalid Date\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"decimalPlaces\",\n\t\t\t\t\tvalue: function decimalPlaces(num) {\n\t\t\t\t\t\tvar match = ('' + num).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\n\t\t\t\t\t\tif (!match) {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn Math.max(0,\n\t\t\t\t\t\t// Number of digits right of decimal point.\n\t\t\t\t\t\t(match[1] ? match[1].length : 0) - (\n\t\t\t\t\t\t// Adjust for scientific notation.\n\t\t\t\t\t\tmatch[2] ? +match[2] : 0));\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"handleDisabledStatus\",\n\t\t\t\t\tvalue: function handleDisabledStatus(series, target) {\n\t\t\t\t\t\tseries.displayType = this.displayTypes[0];\n\t\t\t\t\t\tseries.disabledValue = target.disabledValue;\n\n\t\t\t\t\t\tif (series.display_value == series.disabledValue) {\n\t\t\t\t\t\t\tthis.disabled.push(series);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"handleTextOnly\",\n\t\t\t\t\tvalue: function handleTextOnly(series, target) {\n\t\t\t\t\t\tif (series.displayType == \"Annotation\") {\n\t\t\t\t\t\t\tthis.annotation.push(series);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.display.push(series);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"updatePanelState\",\n\t\t\t\t\tvalue: function updatePanelState() {\n\t\t\t\t\t\tif (this.duplicates) {\n\t\t\t\t\t\t\tthis.panelState = 'error-state';\n\t\t\t\t\t\t} else if (this.disabled.length > 0) {\n\t\t\t\t\t\t\tthis.panelState = 'disabled-state';\n\t\t\t\t\t\t} else if (this.crit.length > 0) {\n\t\t\t\t\t\t\tthis.panelState = 'error-state';\n\t\t\t\t\t\t} else if (this.warn.length > 0) {\n\t\t\t\t\t\t\tthis.panelState = 'warn-state';\n\t\t\t\t\t\t} else if ((this.series == undefined || this.series.length == 0) && this.panel.isGrayOnNoData) {\n\t\t\t\t\t\t\tthis.panelState = 'no-data-state';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.panelState = 'ok-state';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"handleCssDisplay\",\n\t\t\t\t\tvalue: function handleCssDisplay() {\n\t\t\t\t\t\tthis.$panelContainer.removeClass('error-state warn-state disabled-state ok-state no-data-state');\n\t\t\t\t\t\tthis.$panelContainer.addClass(this.panelState);\n\n\t\t\t\t\t\tvar radius = _.isNumber(this.panel.cornerRadius) ? this.panel.cornerRadius : 0;\n\t\t\t\t\t\tthis.$panelContainer.css('border-radius', radius + '%');\n\n\t\t\t\t\t\tvar okColor = this.panel.isIgnoreOKColors ? '' : this.panel.colors.ok;\n\n\t\t\t\t\t\tif (this.panel.colorMode === \"Panel\") {\n\t\t\t\t\t\t\tswitch (this.panelState) {\n\t\t\t\t\t\t\t\tcase 'disabled-state':\n\t\t\t\t\t\t\t\t\tthis.$panelContainer.css('background-color', this.panel.colors.disable);break;\n\t\t\t\t\t\t\t\tcase 'error-state':\n\t\t\t\t\t\t\t\t\tthis.$panelContainer.css('background-color', this.panel.colors.crit);break;\n\t\t\t\t\t\t\t\tcase 'warn-state':\n\t\t\t\t\t\t\t\t\tthis.$panelContainer.css('background-color', this.panel.colors.warn);break;\n\t\t\t\t\t\t\t\tcase 'no-data-state':\n\t\t\t\t\t\t\t\t\tthis.$panelContainer.css('background-color', this.panel.colors.disable);break;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tthis.$panelContainer.css('background-color', okColor);break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$panelContainer.css('background-color', '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"handleMaxAlertsToShow\",\n\t\t\t\t\tvalue: function handleMaxAlertsToShow() {\n\t\t\t\t\t\tvar _this7 = this;\n\n\t\t\t\t\t\tif (this.panel.maxAlertNumber != null && this.panel.maxAlertNumber >= 0) {\n\t\t\t\t\t\t\tvar currentMaxAllowedAlerts = this.panel.maxAlertNumber;\n\t\t\t\t\t\t\tvar filteredOutAlerts = 0;\n\t\t\t\t\t\t\tvar arrayNamesToSlice = [\"disabled\", \"crit\", \"warn\", \"display\"];\n\t\t\t\t\t\t\tarrayNamesToSlice.forEach(function (arrayName) {\n\t\t\t\t\t\t\t\tvar originAlertCount = _this7[arrayName].length;\n\t\t\t\t\t\t\t\t_this7[arrayName] = _this7[arrayName].slice(0, currentMaxAllowedAlerts);\n\t\t\t\t\t\t\t\tcurrentMaxAllowedAlerts = Math.max(currentMaxAllowedAlerts - _this7[arrayName].length, 0);\n\t\t\t\t\t\t\t\tfilteredOutAlerts += originAlertCount - _this7[arrayName].length;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (filteredOutAlerts > 0) {\n\t\t\t\t\t\t\t\tthis.extraMoreAlerts = \"+ \" + filteredOutAlerts + \" more\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"parseUri\",\n\t\t\t\t\tvalue: function parseUri() {\n\t\t\t\t\t\tif (this.panel.links && this.panel.links.length > 0) {\n\t\t\t\t\t\t\tvar link = this.panel.links[0];\n\t\t\t\t\t\t\tthis.uri = link.url;\n\t\t\t\t\t\t\tthis.targetBlank = link.targetBlank;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.uri = undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"validateRegex\",\n\t\t\t\t\tvalue: function validateRegex(textRegex) {\n\t\t\t\t\t\tif (textRegex == null || textRegex.length == 0) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar regex = new RegExp(textRegex);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"onDataReceived\",\n\t\t\t\t\tvalue: function onDataReceived(dataList) {\n\t\t\t\t\t\tthis.series = dataList.map(StatusPluginCtrl.seriesHandler.bind(this));\n\t\t\t\t\t\tthis.render();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"onDataError\",\n\t\t\t\t\tvalue: function onDataError() {\n\t\t\t\t\t\tthis.crit = [];\n\t\t\t\t\t\tthis.warn = [];\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"$onDestroy\",\n\t\t\t\t\tvalue: function $onDestroy() {\n\t\t\t\t\t\tif (this.timeoutId) clearInterval(this.timeoutId);\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"autoFlip\",\n\t\t\t\t\tvalue: function autoFlip() {\n\t\t\t\t\t\tvar _this8 = this;\n\n\t\t\t\t\t\tif (this.timeoutId) clearInterval(this.timeoutId);\n\t\t\t\t\t\tif (this.panel.flipCard && (this.crit.length > 0 || this.warn.length > 0 || this.disabled.length > 0)) {\n\t\t\t\t\t\t\tthis.timeoutId = setInterval(function () {\n\t\t\t\t\t\t\t\t_this8.$panelContainer.toggleClass(\"flipped\");\n\t\t\t\t\t\t\t}, this.panel.flipTime * 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"link\",\n\t\t\t\t\tvalue: function link(scope, elem, attrs, ctrl) {\n\t\t\t\t\t\tif (elem.find('.panel-container').length === 1) {\n\t\t\t\t\t\t\tthis.$panelContainer = elem.find('.panel-container');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$panelContainer = elem;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.$panelContainer.addClass(\"st-card\");\n\t\t\t\t\t\tthis.$panelContoller = ctrl;\n\t\t\t\t\t}\n\t\t\t\t}], [{\n\t\t\t\t\tkey: \"parseThresholds\",\n\t\t\t\t\tvalue: function parseThresholds(metricOptions) {\n\t\t\t\t\t\tvar res = {};\n\n\t\t\t\t\t\tif (StatusPluginCtrl.isFloat(metricOptions.warn)) {\n\t\t\t\t\t\t\tres.warn = parseFloat(metricOptions.warn);\n\t\t\t\t\t\t\tres.warnIsNumber = true;\n\t\t\t\t\t\t} else if (metricOptions.warn instanceof Date) {\n\t\t\t\t\t\t\t// Convert Dates to Numbers and leverage existing threshold logic\n\t\t\t\t\t\t\tres.warn = metricOptions.warn.valueOf();\n\t\t\t\t\t\t\tres.warnIsNumber = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tres.warn = metricOptions.warn;\n\t\t\t\t\t\t\tres.warnIsNumber = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (StatusPluginCtrl.isFloat(metricOptions.crit)) {\n\t\t\t\t\t\t\tres.crit = parseFloat(metricOptions.crit);\n\t\t\t\t\t\t\tres.critIsNumber = true;\n\t\t\t\t\t\t} else if (metricOptions.crit instanceof Date) {\n\t\t\t\t\t\t\tres.crit = metricOptions.crit.valueOf();\n\t\t\t\t\t\t\tres.critIsNumber = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tres.crit = metricOptions.crit;\n\t\t\t\t\t\t\tres.critIsNumber = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn res;\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"isFloat\",\n\t\t\t\t\tvalue: function isFloat(val) {\n\t\t\t\t\t\tif (!isNaN(val) && val.toString().toLowerCase().indexOf('e') == -1) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tkey: \"seriesHandler\",\n\t\t\t\t\tvalue: function seriesHandler(seriesData) {\n\t\t\t\t\t\tvar series = new TimeSeries({\n\t\t\t\t\t\t\tdatapoints: seriesData.datapoints,\n\t\t\t\t\t\t\talias: seriesData.target\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tseries.flotpairs = series.getFlotPairs(\"connected\");\n\n\t\t\t\t\t\treturn series;\n\t\t\t\t\t}\n\t\t\t\t}]);\n\n\t\t\t\treturn StatusPluginCtrl;\n\t\t\t}(MetricsPanelCtrl));\n\n\t\t\t_export(\"StatusPluginCtrl\", StatusPluginCtrl);\n\n\t\t\tStatusPluginCtrl.templateUrl = 'module.html';\n\t\t}\n\t};\n});\n//# sourceMappingURL=status_ctrl.js.map\n"]}